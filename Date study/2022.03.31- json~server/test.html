<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /*
        name : 영화제목
        rank : 관객 수 순위
        createdAt : 개봉 날짜
        salesRevenue : 판매액
        attendance : 관객수 */
      const movies = [
        {
          name: '명량',
          rank: 1,
          createdAt: '2014-07-30',
          salesRevenue: 135748398910,
          attendance: 17613682,
        },
        {
          name: '극한직업',
          rank: 2,
          createdAt: '2019-01-23',
          salesRevenue: 139647979516,
          attendance: 16264944,
        },
        {
          name: '신과함께-죄와 벌',
          rank: 3,
          createdAt: '2014-07-30',
          salesRevenue: 135748398910,
          attendance: 17613682,
        },
        {
          name: '국제시장',
          rank: 4,
          createdAt: '2014-07-30',
          salesRevenue: 110913469630,
          attendance: 14257115,
        },
        {
          name: '어벤져스: 엔드게임',
          rank: 5,
          createdAt: '2019-04-24',
          salesRevenue: 122182694160,
          attendance: 13934592,
        },
      ];
    
    // 우리나라에서 개봉한 역대 관객수 TOP5영화 데이터를 조회했다고 가정.
    // 문제 1번.
    //     영화 이름, 개봉날짜, 순위만 출력하시오.
    console.log('* 문제 1. 영화 이름, 개봉날짜, 순위만 출력하시오.')
    for(var i=0;i<movies.length;i++){
        console.log('영화이름 : '+movies[i].name)
        console.log('개봉날짜 : '+movies[i].createdAt)
        console.log('순위 : '+movies[i].rank)
    }
    console.log('')
    // 문제 2번.
    //     영화 명량과 어벤져스의 판매액 합산을 구하시오.
    console.log('* 문제 2. 영화 명량과 어벤져스의 판매액 합산을 구하시오.')
    console.log((movies[0].salesRevenue+movies[4].salesRevenue)+'원')
    console.log('')
    // 문제 3번.
    //     관객수가 15000000넘은 영화의 이름과 개봉날짜 판매액을 출력하시오.
    console.log('* 문제 3. 관객수가 15000000넘은 영화의 이름과 개봉날짜 판매액을 출력하시오.')
    for(var i=0;i<movies.length;i++){
        if(movies[i].attendance>15000000){
            console.log('영화이름 : '+movies[i].name)
            console.log('개봉날짜 : '+movies[i].createdAt)
            console.log('판매액 : '+movies[i].attendance)
        }
    }
    console.log('')
    // 문제 4번.    
    //     1위 영화부터 5위 영화 판매액 평균을 구하시오.
    console.log('* 문제 4. 1위 영화부터 5위 영화 판매액 평균을 구하시오.')
    var sum = 0;
    var average = 0;
    for(var i=0;i<movies.length;i++){
        sum += movies[i].attendance;
    }
    average = sum / movies.length;
    console.log('판매액 평균 : '+average+'원')
    console.log('')
    // 문제 5번.
    //     개봉날짜가 가장 최근인 영화의 이름과 개봉일 순위를 구하시오.
    // 방법 1.
    console.log('* 문제 5. 개봉날짜가 가장 최근인 영화의 이름과 개봉일 순위를 구하시오.')
    var maxDate = movies[0].createdAt;
    for(var i=0;i<movies.length;i++){
        if(maxDate<movies[i].createdAt){
            maxDate = movies[i].createdAt
        }
    }
    for(var i=0;i<movies.length;i++){
        if(movies[i].createdAt == maxDate){
            console.log('영화이름 : '+movies[i].name)
            console.log('개봉일 : '+movies[i].createdAt)
            console.log('순위 : '+movies[i].rank)
            break;
        }
    }
    
    //방법 2. today와의 차이로 계산
    var today = new Date();
    var todayTime = today.getTime()
    var diff = 1000000000000000000000000000;
    var lastMovieIndex = null;
    for(var i=0;i<movies.length;i++){
        var time = new Date(movies[i].createdAt)
        var createdAtTime = time.getTime();
        var dif = todayTime - createdAtTime
        if(diff>dif){
            diff = dif;
            lastMovieIndex = i;
        }
    }
    console.log('index : '+lastMovieIndex)
    
    console.log('영화이름 : '+movies[lastMovieIndex].name)
    console.log('개봉일 : '+movies[lastMovieIndex].createdAt)
    console.log('순위 : '+movies[lastMovieIndex].rank)
    </script>
  </body>
</html>
